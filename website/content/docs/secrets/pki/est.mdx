---
layout: docs
page_title: Enrollment over Secure Transport (EST) within Vault | PKI - Secrets Engines
description: An overview of the Enrollment over Secure Transport protocol implementation within Vault.
---

# PKI secrets engine - Enrollment over Secure Transport (EST)

This document covers configuration and limitations of Vault Enterprise's <EnterpriseAlert inline="true" />
implementation of the [EST protocol](https://datatracker.ietf.org/doc/html/rfc7030).

## Table of contents

- [What is Enrollment over Secure Transport (EST)](#what-is-enrollment-over-secure-transport-est)
- [Enabling EST support on a Vault mount](#enabling-est-support-on-a-vault-mount)
- [Implementation Limitations](#implementation-limitations)

### What is Enrollment over Secure Transport (EST)?

The EST protocol is an IETF standardized protocol, [RFC 7030](https://datatracker.ietf.org/doc/html/rfc7030),
that allows clients to acquire client certificates and the
associated Certificate Authority (CA) certificates in a simple protocol.

#### Delegated Authentication

#### Well Known URLs

The EST protocol specifies that an EST server must support a path-prefix of
`.well-known/` as defined in [RFC-5785](https://datatracker.ietf.org/doc/html/rfc5785).
More specifically, EST client's won't provide any sort of configuration
for paths, and will default to hitting the host on the path "https://<hostname>:<port>/.well-known/est/<endpoint>".

Some clients allow a single label, sometimes referred to as `additional path segment`,
to differentiate a server's different issuer. This label will be added to the path after
the est path such as "https://<hostname>:<port>/.well-known/est/<label>/<endpoint>".

Within the Vault [EST configuration API](/vault/api-docs/secret/pki#set-est-configuration), a
mount can be specified as the default mount by enabling [default_mount](/vault/api-docs/secret/pki#default_mount)
to true, or provide a mapping of a label within [label_to_path_policy](http://localhost:3000/vault/api-docs/secret/pki#label_to_path_policy)

When either the `default_mount` and/or the `label_to_path_policy` arguments have been
configured, the PKI mount will register the appropriate paths such as `.well-known/est/`
and proxy internally the request to the appropriate namespace, and path for the PKI mount.

### Enabling EST support on a Vault mount

EST support

At this time, Vault's EST implementation supports two different authentication
mechanisms

### Limitations

#### API Support

Vault only implements the required API endpoints of the EST protocol at this time.
The following optional features from the specification are not currently supported.

 - [Full CMC](https://datatracker.ietf.org/doc/html/rfc7030#section-4.3)
 - [Server-side key generation](https://datatracker.ietf.org/doc/html/rfc7030#section-4.4)
 - [CSR attribute endpoints](https://datatracker.ietf.org/doc/html/rfc7030#section-4.5)

#### Well Known redirections

As specified [above](#well-known-urls), a `default_mount` and/or `label_to_path_policy` can be used to register
paths within the .well-known path space. The following limitations apply:

 - Only a single mount across all namespaces/pki mounts can be enabled as the `default_mount`.
 - Labels within `label_to_path_policy` must also be unique across all PKI mounts regardless of namespace.
 - Care must be taken if enabling EST on a [local](/vault/docs/commands/secrets/enable#local) PKI mount on
   performance secondary clusters. `default_mount` nor labels within `label_to_path_policy` must not conflict
   with other replicated PKI mounts, depending on the ordering of a configuration update the registered label
   on the local performance secondary might point to a different mount then the other servers.
 -

## API

The PKI secrets engine has a full HTTP API. Please see the
[PKI secrets engine API](/vault/api-docs/secret/pki) for more details.
